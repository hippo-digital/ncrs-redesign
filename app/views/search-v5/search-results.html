{% extends 'layouts/layout.html' %}

{% block pageTitle %}
  Find a patient
{% endblock %}

{% block beforeContent %}
  <script>sessionStorage.clear()</script>
  {% if data['nhs-number'] %}
    <script>
      sessionStorage.setItem("patientNhsSearch", "{{ data['nhs-number'] }}");
    </script>
  {% endif %}
  {% if data['basic-details-search'] %}
  <script>
    sessionStorage.setItem("patientGenderSearch", "{{ data['basic-details-search']['patientGenderSearch'] }}");
    sessionStorage.setItem("patientFirstNameSearch", "");
    sessionStorage.setItem("patientLastNameSearch", "{{ data['basic-details-search']['patientLastNameSearch'] }}");
    sessionStorage.setItem("patientDobDaySearch", "{{ data['basic-details-search']['patientDobDaySearch'] }}");
    sessionStorage.setItem("patientDobMonthSearch", "{{ data['basic-details-search']['patientDobMonthSearch'] }}");
    sessionStorage.setItem("patientDobYearSearch", "{{ data['basic-details-search']['patientDobYearSearch'] }}");
    sessionStorage.setItem("date", "");
    sessionStorage.setItem("formattedDob", "{{ data['basic-details-search']['formattedDob'] }}");
    sessionStorage.setItem("patientPostcodeSearch", "");
    sessionStorage.setItem("patientPostcodeSearchFormatted", "");
  </script>
  {% endif %}
  {% if data['advanced-details-search'] %}
  <script>
    sessionStorage.setItem("patientGenderAdvanced", "{{ data['advanced-details-search']['patientGenderAdvanced'] }}");
    sessionStorage.setItem("patientFirstNameAdvanced",  "{{ data['advanced-details-search']['patientFirstNameAdvanced'] }}");
    sessionStorage.setItem("patientLastNameAdvanced",  "{{ data['advanced-details-search']['patientLastNameAdvanced'] }}");
    sessionStorage.setItem("widenSearch", "{{ data['advanced-details-search']['widenSearch'] }}");
    sessionStorage.setItem("patientPostcodeAdvanced", "{{ data['advanced-details-search']['patientPostcodeAdvancedFormatted'] }}");
    sessionStorage.setItem("dobFrom", "{{ data['advanced-details-search']['dobFrom'] }}");
    sessionStorage.setItem("dobTo", "{{ data['advanced-details-search']['dobTo'] }}");
  </script>
  {% endif %}{% if data['postcode-search'] %}
  <script>
    sessionStorage.setItem("patientPostcodeOnly", "{{ data['postcode-search']['patientPostcodeOnly'] }}");
  </script>
  {% endif %}
  <section class="nhsuk-hero">

    <div class="nhsuk-width-container">
      <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-two-thirds">
          <div class="nhsuk-hero__wrapper">
            <h1 class="nhsuk-u-margin-bottom-3 nhsuk-heading-l">Find a patient</h1>
          </div>
        </div>
      </div>
    </div>

  </section>

  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item">
          <a class="nhsuk-breadcrumb__link" id="find-patient" href="nhs-number-search">Find a patient</a>
        </li>
        <li class="nhsuk-breadcrumb__item">
          <a class="nhsuk-breadcrumb__link" href="#">Search results</a>
        </li>
      </ol>
      <p class="nhsuk-breadcrumb__back">
        <a class="nhsuk-breadcrumb__backlink" href="nhs-number-search">Find a patient</a>
      </p>
    </div>
  </nav>

{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">

    <div class="nhsuk-grid-column-three-quarters">

      <h2 class="nhsuk-heading-l">Search results</h2>
      <p>
        <span class="number-of-results"></span>
      </p>

    </div>

    <div class="nhsuk-grid-column-full">

      <div class="search-results-container">

        <table id="search-results-table" class="responsive-table" role="grid">
          <caption class="heading-medium">Search results</caption>
          <thead>
            <tr role="row">
              <th scope="col" class="name-results-th">Name</th>
              <th scope="col" class="gender-results-th">Gender</th>
              <th scope="col" class="dob-results-th">Date of birth</th>
              <th scope="col" class="address-results-th">Address</th>
              <th scope="col" class="nhs-no-results-th">NHS Number</th>
            </tr>
          </thead>
          <tbody class="patient-results"></tbody>
        </table>
        <div class="table-foot">
          <span class="load-more"></span>
          <span class="results-count"></span>
        </div>

      </div>

    </div>

  </div>
{% endblock %}
